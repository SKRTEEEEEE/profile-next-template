#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."

# 1. Run Playwright tests with coverage
echo "\nğŸ­ Running Playwright tests with NYC coverage..."
npm run pw:cov || {
  echo "âŒ Playwright tests failed!"
  exit 1
}

# 2. Run Lighthouse CI
echo "\nğŸ  Running Lighthouse CI performance audit..."
npm run perf || {
  echo "âŒ Lighthouse CI failed!"
  exit 1
}

# 3. Check performance thresholds
echo "\nğŸ“Š Checking performance thresholds..."
npm run perf:check || {
  echo "âŒ Performance thresholds not met!"
  exit 1
}

echo "\nâœ… All pre-push checks passed!"
